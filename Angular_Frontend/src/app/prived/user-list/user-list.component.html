<h2>قامة المستعملين</h2>
<!-- 
<div class="card">

  <div id="collapseTwo" class="collapse1" aria-labelledby="headingTwo" data-parent="#accordionExample">
    <div class="card-body">

      <div class="col-md-3 offset-md-3">
      <select   class="input "  name="idDir"  id="idDir"  class="form-select"  #mySelect
      (change)='getEmployeByDir(mySelect.value)' >
      <option   value="null" >اختيار ادارة</option>
        <option *ngFor="let direction of directions"  value="{{direction.idDir}}" >{{direction.nomDir}}</option>
      </select>
    </div> 
    </div> 
  </div>

</div> -->

<!-- <nav class="navbar">
  <input class="form-control" type="text" name="firstName" [(ngModel)]="firstName" 
  (ngModelChange)="search()" placeholder=" entrer first name to search">
  
</nav> -->

<table class="table table-striped ">
  <thead>
    <tr>
      <th (click)="sort('id')">المعرف &nbsp;<i class="fa fa-sort"></i></th>
      <th>الاسم &nbsp;<i class="fa fa-sort"></i></th>
      <th>اللقب</th>
      <th>البريد الالكتروني</th>
      <th>كلمة العبور</th>
      <th>دور المستخدم</th>
      <th style="display: none2;">رمز الادارة</th>

      <th>خيارات</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let user of users  | orderBy: key: reverse | paginate:{itemsPerPage:4, currentPage:p}">
      <td>{{user.identifiant}}</td>
      <td>{{user.prenom}}</td>
      <td>{{user.nom}}</td>
      <td>{{user.email}}</td>
      <td>{{user.password}}</td>
      <td>{{user.roleuser}}</td>
      <td style="display: none2;">{{user.idDir}}</td>
      <!-- <td>{{user.nomDir}}</td> -->
      <td>
        <button (click)="showModalEdit(user)" class="btn btn-info" data-toggle="tooltip" title="تحيين "><i
            class="fa fa-edit"></i></button>
        <button (click)="showModaldeleteUser(user.identifiant)" class="btn btn-danger" style="margin-right:10px;"><i
            class="fa fa-trash"></i></button>
        <button class="btn btn-warning " style="margin-right:10px ;"><i class="fa fa-bars"></i></button>
      </td>
    </tr>
  </tbody>
  <pagination-controls (pageChange)="p = $event" previousLabel="&lsaquo;" nextLabel="&rsaquo;"></pagination-controls>
</table>

<!-- **********************************************************modal-Editer  programme********************************** -->
<div class="modal fade" id="ModalEditSPRG" runat="server" tabindex="-1" role="dialog" [ngClass]="{'show':showModaledit}"
  aria-hidden="true" aria-labelledby="addModalLabel" data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header bg-default">
        <h4 class="modal-title custom_align" id="H1">
          <i class="far fa-edit"></i> تحيين بيانات المستعمل
        </h4>
      </div>

      <div class="modal-body" style="overflow: auto">
        <form>
          <div class="form-group row" style="margin-bottom: 10px;">
            <label for="identifiant" class="col-sm-2 col-form-label">المعرف </label>
            <div class="col-sm-5">
              <input type="text" class="form-control"  name="identifiant"
              [(ngModel)]="userEdit.identifiant" placeholder=" المعرف الوحيد" disabled>
            </div>
          </div>
          <div class="form-group row" style="margin-bottom: 10px;">
            <label for="prenom" class="col-sm-2 col-form-label">الاسم </label>
            <div class="col-sm-5">
              <input type="text" class="form-control" id="prenom"  name="prenom"
              [(ngModel)]="userEdit.prenom" placeholder="  الاسم">
            </div>
          </div>
          <div class="form-group row" style="margin-bottom: 10px;">
            <label for="nom" class="col-sm-2 col-form-label">اللقب </label>
            <div class="col-sm-5">
              <input type="text" class="form-control" id="nom" name="nom"
              [(ngModel)]="userEdit.nom" placeholder="  اللقب">
            </div>
          </div>
          <div class="form-group row" style="margin-bottom: 10px;">
            <label for="email" class="col-sm-2 col-form-label">البريد الالكتروني</label>
            <div class="col-sm-5">
              <input type="email" class="form-control" id="email" name="email"
              [(ngModel)]="userEdit.email" placeholder="البريد الالكتروني">
            </div>
          </div>
          <div class="form-group row"  style="margin-bottom: 10px;">
            <label for="password" class="col-sm-2 col-form-label">كلمة العبور</label>
            <div class="col-sm-5">
              <input type="password" class="form-control" id="password" name="password"
              [(ngModel)]="userEdit.password" placeholder="كلمة العبور">
            </div>
          </div>
          <div class="form-group row" style="margin-bottom: 10px;">
            <label for="roleuser" class="col-sm-2 col-form-label">دور المستخدم </label>
            <div class="col-sm-5">
              <input type="text" class="form-control" id="roleuser" name="roleuser"
              [(ngModel)]="userEdit.roleuser" placeholder=" دور المستخدم ">
            </div>
          </div>
          <div class="form-group row" style="margin-bottom: 10px;">
            <label for="dir" class="col-sm-2 col-form-label">الادارة </label>
            <div class="col-sm-5">
              <input type="text" class="form-control" id="dir" name="dir"
              [(ngModel)]="userEdit.idDir" placeholder="  الادارة">
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer ">
        <button class="btn btn-info" data-dismiss="modal" aria-hidden="true" (click)="updateUser()"> حفظ</button>
        <button class="btn btn-secondary" data-dismiss="modal" aria-hidden="true" (click)="showModaledit=false">
          الغاء</button>
      </div>
    </div>
  </div>
</div>

<div id="ModaldeleteConfirm" class="modal fade"  [ngClass]="{'show': showModaldelete}"
aria-hidden="true">
<div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header">
          <i class="fa fa-trash"></i>
        </div>
        <div class="modal-title">
            </div>
        <div class="modal-body">
           هل تريد حذف المعطى الحالي؟
           <div class="form-group">
            
            <input type="hidden" class="form-control" id="identifiant" 
              [(ngModel)]="iduserdelete" name="identifiant">
        </div>
          </div>
        <div class="modal-footer">
        <Button ID="btnDeletePRG"  Class="btn btn-danger " (click)="deleteUser()"> حذف</Button>
        <button type="button" class="btn btn-dark"  (click)="showModaldelete=false">إلغاء</button>       
        </div>
    </div>
</div>
</div>
<button type="button" class="btn btn-danger"  (click)="ngOnInit()">refresh</button>
